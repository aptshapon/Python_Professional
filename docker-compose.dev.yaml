version: "3"

services:
  app:
    build:
      context: ./backend
      dockerfile: dockerfile
    command: "./scripts/dev_start.sh"
    ports:
      - "8000:8000"
    volumes:
      - ./backend:/app
      - /ziv/shared/rule:/ziv/shared/rule
      - /ziv/shared/packages:/ziv/shared/packages
    depends_on:
      - redis
      - clamav
    networks:
      - clamav_network

  redis:
    image: "redis:latest"

  clamav:
    image: "clamav/clamav:stable"
    ports:
      - "3310:3310"
    volumes:
      - clam_db:/var/lib/clamav
    networks:
      - clamav_network

volumes:
  clam_db:

networks:
  clamav_network: {}
